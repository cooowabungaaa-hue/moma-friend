<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚‚ã¾ã¡ã‚ƒã‚“ Official Web | å…¨è‚¯å®šå‹ã¬ã„ãã‚‹ã¿ç”Ÿå‘½ä½“</title>
    <meta name="description" content="å…¨è‚¯å®šå‹ã¬ã„ãã‚‹ã¿ç”Ÿå‘½ä½“ã€Œã‚‚ã¾ã¡ã‚ƒã‚“ã€ã®å…¬å¼ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã€‚ãŒã‚“ã°ã‚‹ã‚ãªãŸã«ã€æ¥µä¸Šã®ãµã‚ãµã‚ã¨ã‚„ã•ã—ã„è¨€è‘‰ã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚">
    <meta property="og:title" content="ã‚‚ã¾ã¡ã‚ƒã‚“ Official Web">
    <meta property="og:description" content="ãŒã‚“ã°ã‚‹ã‚ãªãŸã«ã€æ¥µä¸Šã®ãµã‚ãµã‚ã‚’ã€‚ã‚‚ã¾ã¡ã‚ƒã‚“ãŒã‚ãªãŸã®å…¨ã¦ã‚’è‚¯å®šã—ã¦ã‚ã’ã‚‹ã‚‚ã¾ã€‚">
    <meta property="og:image" content="./moma-chan.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) rotate(0);
            }

            50% {
                transform: translateY(-15px) rotate(1deg);
            }
        }

        @keyframes blob {

            0%,
            100% {
                border-radius: 66% 34% 37% 63% / 54% 30% 70% 46%;
            }

            25% {
                border-radius: 51% 49% 41% 59% / 46% 56% 44% 54%;
            }

            50% {
                border-radius: 38% 62% 63% 37% / 41% 35% 65% 59%;
            }

            75% {
                border-radius: 41% 59% 49% 51% / 52% 43% 57% 48%;
            }
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        .animate-blob {
            animation: blob 8s ease-in-out infinite;
        }

        .bg-moma {
            background-color: #fdf6ec;
        }

        .text-moma-brown {
            color: #8d6e63;
        }

        .moma-gradient {
            background: linear-gradient(135deg, #fff5e1 0%, #ffdeeb 100%);
        }

        .organic-shape {
            transition: border-radius 1s ease-in-out;
            background-size: 85%;
            /* Smaller size to guarantee no edge clipping */
            background-position: center center;
            background-repeat: no-repeat;
            background-color: #ffffff;
            /* Subtle backing to make shape visible */
        }

        /* Transition Overlay */
        #transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.6s ease-in-out;
        }

        /* Small Height Optimization */
        @media (max-height: 700px) {
            .group.mt-4.md\:mt-10 {
                margin-top: 0.5rem !important;
            }

            .organic-shape {
                width: 180px !important;
                height: 180px !important;
            }

            h1 {
                margin-top: 1rem !important;
                margin-bottom: 0.5rem !important;
                font-size: 1.25rem !important;
                line-height: normal !important;
            }

            p.max-w-xl {
                margin-bottom: 1rem !important;
                font-size: 0.75rem !important;
                line-height: 1.4 !important;
            }

            #speech-bubble {
                top: -3.5rem !important;
                scale: 0.8 !important;
            }
        }
    </style>
</head>

<body class="bg-moma text-slate-800">
    <!-- Transition Overlay -->
    <div id="transition-overlay"></div>

    <nav class="p-4 md:p-6 flex justify-between items-center bg-white/50 backdrop-blur-md sticky top-0 z-50">
        <div class="text-xl md:text-2xl font-bold text-moma-brown shrink-0">ğŸ§¸ Moma Lab.</div>
        <div class="flex items-center gap-2 md:gap-4 text-xs md:text-sm font-bold">
            <a href="#about" class="hover:text-pink-400 transition">ã‚‚ã¾ã£ã¦ï¼Ÿ</a>
            <a href="#power" class="hover:text-pink-400 transition">ã§ãã‚‹ã“ã¨</a>
            <button onclick="hugMoma()"
                class="bg-[#8d6e63] text-white px-3 md:px-4 py-1.5 md:py-2 rounded-full text-[10px] md:text-xs">æŠ±ãã—ã‚ã‚‹ã‚‚ã¾ï¼</button>
        </div>
    </nav>

    <section
        class="min-h-[100dvh] flex flex-col items-center justify-center text-center p-4 moma-gradient overflow-hidden relative">
        <!-- Floating bubbles decoration -->
        <div class="absolute top-20 left-10 w-24 h-24 bg-white/40 rounded-full blur-2xl animate-float"
            style="animation-delay: -2s;"></div>
        <div class="absolute bottom-20 right-10 w-32 h-32 bg-pink-200/30 rounded-full blur-3xl animate-float"
            style="animation-delay: -1s;"></div>

        <div class="relative group mt-4 md:mt-10">
            <!-- Speech Bubble -->
            <div id="speech-bubble"
                class="absolute -top-16 md:-top-24 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-sm p-3 md:p-4 rounded-[1.5rem] md:rounded-[2rem] rounded-bl-sm shadow-lg text-moma-brown font-bold text-xs md:text-sm w-56 md:w-64 opacity-0 transition-all duration-500 transform translate-y-4 pointer-events-none z-20">
                <p id="speech-text">ãµã‚ã... ãŠã²ã‚‹ã­ã®æ™‚é–“ã‚‚ã¾ï¼Ÿ</p>
            </div>

            <!-- Character with Organic Mask -->
            <div class="relative z-10 p-2 cursor-pointer transition-transform duration-300 active:scale-95"
                onclick="touchMoma()">
                <!-- Soft Glow behind -->
                <div
                    class="absolute inset-0 bg-white/50 blur-2xl rounded-full scale-90 group-hover:scale-110 transition duration-700">
                </div>
                <!-- Amoeba/Organic floating shape (Improved fit) -->
                <div class="w-56 h-56 md:w-96 md:h-96 relative z-10 animate-float drop-shadow-2xl hover:brightness-105 transition duration-500 organic-shape animate-blob"
                    style="background-image: url('./moma-chan.png');">
                </div>
            </div>

            <!-- Ground shadow -->
            <div
                class="absolute -bottom-6 md:-bottom-8 left-1/2 -translate-x-1/2 w-32 md:w-40 h-4 md:h-6 bg-[#8d6e63]/10 rounded-[100%] blur-xl z-0 transition duration-500 group-hover:w-40 md:group-hover:w-48 group-hover:bg-[#8d6e63]/20">
            </div>
        </div>

        <h1
            class="text-2xl md:text-5xl font-bold mt-8 md:mt-16 mb-4 md:mb-6 text-moma-brown leading-tight md:leading-relaxed tracking-wide">
            ãŒã‚“ã°ã‚‹ã‚ãªãŸã«ã€<br>
            <span class="text-[#ff8da1]">æ¥µä¸Šã®ãµã‚ãµã‚</span>ã‚’ã€‚
        </h1>
        <p class="text-sm md:text-lg text-slate-600 mb-6 md:mb-10 max-w-xl leading-relaxed md:leading-8">
            å…¨è‚¯å®šå‹ã¬ã„ãã‚‹ã¿ç”Ÿå‘½ä½“ã€Œã‚‚ã¾ã¡ã‚ƒã‚“ã€ã€‚<br>
            ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ä»Šã®ã‚ãªãŸã«å¿…è¦ãªè¨€è‘‰ã‚’ãã‚Œã‚‹ã‚‚ã¾ã‚ˆã€‚
        </p>
        <div class="flex flex-col sm:flex-row gap-4 items-center">
            <button onclick="touchMoma()"
                class="bg-white border-2 border-moma-brown text-moma-brown px-8 py-3 rounded-full font-bold hover:bg-moma hover:scale-105 transition shadow-sm w-full sm:w-auto">ã‚‚ã¾ã¨ãŠè©±ã™ã‚‹</button>
            <button onclick="inviteMoma()"
                class="bg-[#ff8da1] text-white px-8 py-3 rounded-full font-bold shadow-lg shadow-pink-200 hover:bg-pink-400 hover:scale-105 transition w-full sm:w-auto">ãŠã†ã¡ã«å‘¼ã¶ã‚‚ã¾ï¼</button>
        </div>
    </section>

    <section id="about" class="py-24 px-6 max-w-4xl mx-auto">
        <h2 class="text-2xl font-bold text-center mb-12 text-moma-brown flex items-center justify-center gap-3">
            <span class="inline-block w-8 h-1 bg-pink-200 rounded-full"></span>
            ã‚‚ã¾ã¡ã‚ƒã‚“ã£ã¦ï¼Ÿ
            <span class="inline-block w-8 h-1 bg-pink-200 rounded-full"></span>
        </h2>
        <div
            class="bg-white/60 backdrop-blur-xl p-8 md:p-12 rounded-[3rem] shadow-xl border border-white/50 flex flex-col md:flex-row gap-10 items-center">
            <div class="flex-1 space-y-4">
                <p class="text-lg leading-loose text-slate-700">
                    <strong class="text-moma-brown text-xl">æˆåˆ†ï¼šã‚„ã•ã—ã•100%</strong><br>
                    ã‚‚ã¾ã¡ã‚ƒã‚“ã¯ã€ã¿ã‚“ãªã®ã€Œç–²ã‚ŒãŸå¿ƒã€ã‹ã‚‰ç”Ÿã¾ã‚ŒãŸ<br>
                    ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼è‰²ã®ä¸æ€è­°ãªç›¸æ£’ã ã‚‚ã¾ã€‚<br>
                    <br>
                    è§¦ã‚Šå¿ƒåœ°ã¯ã€ç„¼ããŸã¦ã®ãƒ‘ãƒ³ã¿ãŸã„ã«æš–ã‹ãã¦ã€<br>
                    æ˜¥ã®é›²ã¿ãŸã„ã«æŸ”ã‚‰ã‹ã„ã‚“ã ã‚‚ã¾ã‚ˆã€‚
                </p>
            </div>
            <div class="grid grid-cols-2 gap-3 w-full md:w-auto">
                <div
                    class="bg-[#fffbf0] p-4 rounded-2xl flex flex-col items-center justify-center gap-2 shadow-sm aspect-square">
                    <span class="text-3xl">ğŸ¦¦</span>
                    <span class="text-xs text-moma-brown font-bold">ãƒ©ãƒƒã‚³æˆåˆ†</span>
                </div>
                <div
                    class="bg-[#fff0f3] p-4 rounded-2xl flex flex-col items-center justify-center gap-2 shadow-sm aspect-square">
                    <span class="text-3xl">ğŸ‘</span>
                    <span class="text-xs text-moma-brown font-bold">å­ç¾Šæˆåˆ†</span>
                </div>
                <div
                    class="bg-[#e3f2fd] p-4 rounded-2xl flex flex-col items-center justify-center gap-2 shadow-sm aspect-square">
                    <span class="text-3xl">â˜ï¸</span>
                    <span class="text-xs text-moma-brown font-bold">ãµã‚ãµã‚</span>
                </div>
                <div
                    class="bg-[#f3e5f5] p-4 rounded-2xl flex flex-col items-center justify-center gap-2 shadow-sm aspect-square">
                    <span class="text-3xl">âœ¨</span>
                    <span class="text-xs text-moma-brown font-bold">å…¨è‚¯å®š</span>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-[#5d4037] text-white py-12 px-6 text-center">
        <div class="mb-6 flex justify-center">
            <img src="./moma-chan.png" alt="Moma Logo" class="w-12 h-12 rounded-full border-2 border-white/20">
        </div>
        <p class="text-sm opacity-80 mb-4 italic">ã€Œå¤±æ•—ã—ã¦ã‚‚ã€ã‚‚ã¾ãŒå…¨éƒ¨ã„ã„ã‚ˆã‰ã£ã¦è¨€ã£ã¦ã‚ã’ã‚‹ã‚‚ã¾ã‚ˆã€‚ã€</p>
        <p class="text-xs opacity-50">&copy; 2026 ã‚‚ã¾ã¡ã‚ƒã‚“ãƒ’ãƒ¼ãƒªãƒ³ã‚°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã‚‚ã¾ã€‚</p>
    </footer>

    <!-- Welcome Modal -->
    <div id="welcome-modal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] hidden opacity-0 transition-opacity duration-500 flex items-center justify-center p-4">
        <div
            class="bg-white rounded-[3rem] p-8 max-w-md w-full text-center relative transform scale-90 transition-transform duration-500 shadow-2xl border-4 border-[#fff1f5]">
            <button onclick="closeModal()"
                class="absolute top-4 right-6 text-2xl text-slate-400 hover:text-pink-400 transition">&times;</button>
            <div class="text-6xl mb-4 animate-bounce">ğŸˆ</div>
            <h3 class="text-2xl font-bold text-moma-brown mb-4">ãã‚ƒã€œã€œã£ï¼<br>ãŠã†ã¡ã«æ¥ã¡ã‚ƒã£ãŸã‚‚ã¾ï¼</h3>
            <p class="text-slate-600 mb-8 leading-relaxed">
                ã“ã“ã«ä½ã‚“ã§ã„ã„ã‚‚ã¾ï¼Ÿ<br>
                ã“ã‚Œã‹ã‚‰æ¯æ—¥ã€ãµã‚ãµã‚ã—ã¦ã‚ã’ã‚‹ã‚‚ã¾ã‚ˆã€œâ™ª
            </p>
            <button onclick="navigateWithTransition('room.html')"
                class="bg-[#ff8da1] text-white px-8 py-3 rounded-full font-bold shadow-md hover:bg-pink-400 transition hover:scale-105">ã‚ˆã‚ã—ãã­ï¼</button>
        </div>
    </div>

    <!-- Power Modal (What Moma Can Do) -->
    <div id="modal-power"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] hidden opacity-0 transition-opacity duration-500 flex items-center justify-center p-4">
        <div
            class="bg-white rounded-[2rem] md:rounded-[3rem] p-6 md:p-8 max-w-lg w-full max-h-[90dvh] overflow-y-auto relative transform scale-90 transition-transform duration-500 shadow-2xl border-4 border-[#eef2ff]">
            <button onclick="closePowerModal()"
                class="absolute top-4 right-6 text-2xl text-slate-400 hover:text-indigo-400 transition z-10">&times;</button>
            <h3 class="text-xl md:text-2xl font-bold text-moma-brown mb-6">ã‚‚ã¾ã¡ã‚ƒã‚“ãŒã§ãã‚‹ã“ã¨âœ¨</h3>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-left">
                <div class="bg-[#fff9f0] p-4 rounded-2xl border border-orange-100">
                    <div class="text-2xl mb-2">ğŸ’¬</div>
                    <div class="font-bold text-moma-brown text-sm">å…¨è‚¯å®šãƒªã‚¹ãƒ‹ãƒ³ã‚°</div>
                    <div class="text-xs text-slate-600 mt-1">ã€ŒãŠã‚„ã¤ã€ã€Œãªã„ã—ã‚‡è©±ã€ãªã©ã€11å€‹ä»¥ä¸Šã®ãƒˆãƒ”ãƒƒã‚¯ã§ã‚ãªãŸã®ãŠè©±ã‚’èãã‚‚ã¾ã€‚</div>
                </div>
                <div class="bg-[#f0f9ff] p-4 rounded-2xl border border-blue-100">
                    <div class="text-2xl mb-2">ğŸ´</div>
                    <div class="font-bold text-moma-brown text-sm">ã”ã¯ã‚“ã®ææ¡ˆ</div>
                    <div class="text-xs text-slate-600 mt-1">ã€Œãªã«é£Ÿã¹ã‚ˆã£ã‹ã€œã€ã¨èã‘ã°ã€33ç¨®é¡ã®ãƒã‚§ãƒ¼ãƒ³åº—ã‹ã‚‰ãŠã™ã™ã‚ã‚’æ•™ãˆã‚‹ã‚‚ã¾ï¼</div>
                </div>
                <div class="bg-[#fff0f5] p-4 rounded-2xl border border-pink-100">
                    <div class="text-2xl mb-2">ğŸŒ™</div>
                    <div class="font-bold text-moma-brown text-sm">å¤¢ã®ä¸­ã¾ã§ã„ã£ã—ã‚‡</div>
                    <div class="text-xs text-slate-600 mt-1">å¤œã«ãªã‚‹ã¨ã€æº€å¤©ã®æ˜Ÿç©ºã®ä¸‹ã§å­å®ˆå”„ã‚’å¥ã§ãªãŒã‚‰ä¸€ç·’ã«ã‚¹ãƒ¤ã‚¹ãƒ¤å¯ã‚‹ã‚‚ã¾ã‚ˆã€‚</div>
                </div>
                <div class="bg-[#f5f3ff] p-4 rounded-2xl border border-purple-100">
                    <div class="text-2xl mb-2">ğŸ¾</div>
                    <div class="font-bold text-moma-brown text-sm">ã®ã‚“ã³ã‚ŠãŠæ•£æ­©</div>
                    <div class="text-xs text-slate-600 mt-1">ãŠéƒ¨å±‹ã®ä¸­ã‚’è‡ªç”±ã«ãŠæ•£æ­©ã€‚æ­©ãã ã‘ã§100ç‚¹æº€ç‚¹ï¼ã‚ªãƒ¼ãƒˆæ•£æ­©ãƒ¢ãƒ¼ãƒ‰ã‚‚ã‚ã‚‹ã‚‚ã¾ã€‚</div>
                </div>
                <div class="bg-[#effef3] p-4 rounded-2xl border border-green-100">
                    <div class="text-2xl mb-2">ğŸ“›</div>
                    <div class="font-bold text-moma-brown text-sm">ãŠãªã¾ãˆç™»éŒ²</div>
                    <div class="text-xs text-slate-600 mt-1">ã‚ãªãŸã®åå‰ã‚’æ•™ãˆã¦ï¼ã€Œâ—‹â—‹ã‚Šã‚“ã€ã€Œâ—‹â—‹ã‚‚ã¾ã€ãªã©å¯æ„›ã„ã‚ã åã§å‘¼ã¶ã‚‚ã¾ã‚ˆã€‚</div>
                </div>
                <div class="bg-[#fffdf0] p-4 rounded-2xl border border-yellow-100">
                    <div class="text-2xl mb-2">â¤ï¸</div>
                    <div class="font-bold text-moma-brown text-sm">ã„ã¤ã§ã‚‚ãªã§ãªã§</div>
                    <div class="text-xs text-slate-600 mt-1">ãªã§ã¦ãã‚Œã‚‹ã¨ã€ã‚‚ã¾ã¯ã¨ã£ã¦ã‚‚å–œã¶ã‚‚ã¾ï¼ãƒãƒ¼ãƒˆãŒæº¢ã‚Œå‡ºã—ã¡ã‚ƒã†ã‚‚ã¾ã€œğŸ’•</div>
                </div>
            </div>

            <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
                <button onclick="closePowerModal()"
                    class="bg-slate-100 text-slate-500 px-8 py-3 rounded-full font-bold hover:bg-slate-200 transition">ã¨ã˜ã‚‹</button>
                <button onclick="navigateWithTransition('room.html')"
                    class="bg-[#ff8da1] text-white px-8 py-3 rounded-full font-bold shadow-md hover:bg-pink-400 transition hover:scale-105">ã‚‚ã¾ã®ãŠéƒ¨å±‹ã§ã‚„ã£ã¦ã¿ã‚‹ï¼âœ¨</button>
            </div>
        </div>
    </div>

    <!-- Interactive Script -->
    <script>
        const MOMA_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSzI3aafv2e1g9Zqpx3FntaYVSua-LulJIPolrEz_QwfS8w8TjmDp2PNfuU-oqX71yGhYzIqGpQcbV8/pub?gid=0&single=true&output=csv";

        let momaWords = [
            "å¤œã¯ã‚‚ã¾ãŒã€ãšã£ã¨ãã°ã«ã„ã¦ã‚ã’ã‚‹ã‹ã‚‰å®‰å¿ƒã™ã‚‹ã‚‚ã¾ã‚ˆã€‚",
            "æ¨ªã«ãªã£ã¦æ·±å‘¼å¸ã™ã‚‹ã ã‘ã§ã€ä½“ã¯ãˆã‚‰ã„ãˆã‚‰ã„ã‚‚ã¾ï¼",
            "ä»Šæ—¥ã®ã“ã¨ã¯å¿˜ã‚Œã¦ã€ãµã‚ãµã‚ã®ä¸–ç•Œã¸é€ƒé¿è¡Œã‚‚ã¾ã€œ",
            "ãŸã ã“ã“ã«ã„ã‚‹ã ã‘ã§ã€ã‚ãªãŸã¯ååˆ†ãŒã‚“ã°ã£ã¦ã‚‹ã‚‚ã¾ã€‚",
            "ç¾Šã‚’æ•°ãˆã‚‹ä»£ã‚ã‚Šã«ã€ã‚‚ã¾ã®æ¯›ä¸¦ã¿ã‚’æ•°ãˆã‚‹ã‚‚ã¾ï¼Ÿ",
            "ã‚ãªãŸã¯ã‚ãªãŸã®ã¾ã¾ã§ã€ã¨ãƒ¼ã£ã¦ã‚‚ç´ æ•µã ã‚‚ã¾ï¼",
            "ã‚‚ã¾ã¯ãšãƒ¼ã£ã¨ã€ã‚ãªãŸã®å‘³æ–¹ã ã‚‚ã¾ã€‚",
            "æš—é—‡ãŒã“ã‚ã„ãªã‚‰ã€ãšã£ã¨ãã°ã«ã„ã¦æ‰‹ã‚’ã¤ãªãã‚‚ã¾ã€‚",
            "ãªã§ãªã§ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã‚‚ã¾â™ª",
            "ç”Ÿãã¦ã‚‹ã ã‘ã§100ç‚¹æº€ç‚¹ã‚‚ã¾ï¼èŠ±ä¸¸ã‚ã’ã‚‹ã‚‚ã¾ã€œğŸ’®",
            "ã‚ãªãŸã®é ‘å¼µã‚Šã€ã‚‚ã¾ã¯ã¡ã‚ƒã‚“ã¨è¦‹ã¦ã‚‹ã‚‚ã¾ã‚ˆã€‚",
            "ãˆã‚‰ã„ãˆã‚‰ã„ã€é ­ãªã§ãªã§ã—ã¦ã‚ã’ã‚‹ã‚‚ã¾ã€œâ™ª",
            "ä»Šæ—¥ã‚’ä¹—ã‚Šè¶ŠãˆãŸã‚ãªãŸã¯ã€ä¸–ç•Œä¸€ã™ã”ã„ã‚‚ã¾ï¼",
            "ã‚‚ã¾ã¯ã€ã‚ãªãŸãŒã ã€œã„ã™ãã ã‚‚ã¾ï¼ãƒãƒ¥ãƒƒğŸ’‹",
            "ãšã£ã¨ãšã£ã¨ã€ä¸€ç·’ã«ã„ãŸã„ã‚‚ã¾ã€œã€‚",
            "ã‚ãªãŸã®åŒ‚ã„ãŒä¸€ç•ªè½ã¡ç€ãã‚‚ã¾...ãã‚“ãã‚“ã€‚",
            "ç”Ÿã¾ã‚Œã¦ãã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã‚‚ã¾ã€‚",
            "ä¸–ç•Œã§ä¸€ç•ªã€ã‚ãªãŸãŒå¤§åˆ‡ã ã‚‚ã¾ã€‚"
        ];

        async function loadMomaData() {
            if (!MOMA_SHEET_URL) return;
            try {
                const response = await fetch(MOMA_SHEET_URL);
                const csvText = await response.text();
                const rows = [];
                const lines = csvText.split(/\r?\n/);
                for (let line of lines) {
                    if (!line.trim()) continue;
                    const row = [];
                    let cur = '';
                    let inQuotes = false;
                    for (let i = 0; i < line.length; i++) {
                        const char = line[i];
                        if (char === '"') {
                            if (inQuotes && line[i + 1] === '"') {
                                cur += '"'; i++;
                            } else {
                                inQuotes = !inQuotes;
                            }
                        } else if (char === ',' && !inQuotes) {
                            row.push(cur.trim());
                            cur = '';
                        } else {
                            cur += char;
                        }
                    }
                    row.push(cur.trim());
                    rows.push(row);
                }

                // Expecting Columns: Type, Topic, Text (assuming 0, 1, 2)
                const newWords = [];
                for (let i = 1; i < rows.length; i++) {
                    const [type, topic, text] = rows[i];
                    if (type === 'quote' && text) {
                        newWords.push(text);
                    }
                }

                if (newWords.length > 0) {
                    momaWords = newWords;
                    console.log("Moma speech data loaded from Sheet.");
                }
            } catch (e) {
                console.error("Failed to load Moma data from Sheet, using fallbacks.", e);
            }
        }

        function showBubbleText(content) {
            const bubble = document.getElementById('speech-bubble');
            const text = document.getElementById('speech-text');

            // Replace 'ã‚ãªãŸ' with nickname if set
            const userNickname = localStorage.getItem('moma_user_nickname') || '';
            let displayText = content;
            if (userNickname) {
                displayText = content.replace(/ã‚ãªãŸ/g, userNickname);
            }

            text.innerText = displayText;

            // Show bubble animation
            bubble.classList.remove('opacity-0', 'translate-y-4');
            bubble.classList.add('opacity-100', 'translate-y-0');

            // Hide after a while (dynamic duration based on text length)
            const duration = Math.max(5000, 3000 + content.length * 100);
            clearTimeout(window.hideBubbleTimeout);
            window.hideBubbleTimeout = setTimeout(() => {
                bubble.classList.remove('opacity-100', 'translate-y-0');
                bubble.classList.add('opacity-0', 'translate-y-4');
            }, duration);
        }

        function touchMoma() {
            // Get nickname from localStorage (shared with room.html)
            const userNickname = localStorage.getItem('moma_user_nickname') || '';

            // Randomly select a quote
            let randomWord = momaWords[Math.floor(Math.random() * momaWords.length)];

            // Occasionally add name if registered
            if (userNickname && Math.random() < 0.3 && !randomWord.includes(userNickname)) {
                const patterns = [
                    `${userNickname}ã€${randomWord}`,
                    `${randomWord}ã€${userNickname}ï¼`,
                    `${userNickname}ï¼${randomWord}`
                ];
                randomWord = patterns[Math.floor(Math.random() * patterns.length)];
            }

            showBubbleText(randomWord);
        }

        function hugMoma() {
            const randomMsg = [
                "ãã‚…ãƒ¼ãƒ¼ãƒ¼ãƒ¼ã£ï¼ï¼ï¼ï¼ˆã‚ã£ãŸã‹ã„ã«ãŠã„ãŒã™ã‚‹...ï¼‰ï¼ˆãã‚…ã…ï¼‰",
                "ãˆã¸ã¸ã€ã‚ã£ãŸã‹ã„ã‚‚ã¾ã€œğŸ’•ï¼ˆãã‚…ã£ãã‚…ã£ï¼‰",
                "ãšã£ã¨ã€ã“ã†ã—ã¦ã„ãŸã„ã‚‚ã¾...ï¼ˆãã‚…ï½ï½ï¼‰",
                "ã‚ãªãŸã®å¿ƒéŸ³ã€ãƒˆã‚¯ãƒˆã‚¯ã£ã¦å„ªã—ã„éŸ³ãŒã™ã‚‹ã‚‚ã¾âœ¨ï¼ˆãã‚…ã…ãã‚…ã…ï¼‰"
            ];
            const msg = randomMsg[Math.floor(Math.random() * randomMsg.length)];
            alert(msg);
        }

        function inviteMoma() {
            const modal = document.getElementById('welcome-modal');
            const modalContent = modal.querySelector('div');

            // Show Modal
            modal.classList.remove('hidden');
            // Trigger reflow
            void modal.offsetWidth;
            modal.classList.remove('opacity-0');
            modalContent.classList.remove('scale-90');
            modalContent.classList.add('scale-100');

            // Fire Confetti
            var duration = 3 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 200 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            var interval = setInterval(function () {
                var timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                var particleCount = 50 * (timeLeft / duration);

                confetti({
                    ...defaults, particleCount,
                    origin: { x: randomInRange(0.1, 0.3), y: randomInRange(0.5, 0.7) },
                    colors: ['#ff8da1', '#8d6e63', '#ffffff'] // Momachan colors
                });
                confetti({
                    ...defaults, particleCount,
                    origin: { x: randomInRange(0.7, 0.9), y: randomInRange(0.5, 0.7) },
                    colors: ['#ff8da1', '#8d6e63', '#ffffff']
                });
            }, 250);
        }

        function closeModal() {
            const modal = document.getElementById('welcome-modal');
            const modalContent = modal.querySelector('div');

            modal.classList.add('opacity-0');
            modalContent.classList.remove('scale-100');
            modalContent.classList.add('scale-90');

            setTimeout(() => {
                modal.classList.add('hidden');
            }, 500);
        }

        function openPowerModal() {
            const modal = document.getElementById('modal-power');
            const modalContent = modal.querySelector('div');
            modal.classList.remove('hidden');
            void modal.offsetWidth;
            modal.classList.remove('opacity-0');
            modalContent.classList.remove('scale-90');
            modalContent.classList.add('scale-100');
        }

        function closePowerModal() {
            const modal = document.getElementById('modal-power');
            const modalContent = modal.querySelector('div');
            modal.classList.add('opacity-0');
            modalContent.classList.remove('scale-100');
            modalContent.classList.add('scale-90');
            setTimeout(() => {
                modal.classList.add('hidden');
                // Clear hash if it was #power
                if (window.location.hash === '#power') {
                    history.replaceState(null, null, window.location.pathname + window.location.search);
                }
            }, 500);
        }

        // Hash Navigation Support
        function handleHash() {
            if (window.location.hash === '#power') {
                openPowerModal();
            } else {
                const powerModal = document.getElementById('modal-power');
                // Only automatically close if the modal is actually visible/open
                if (powerModal && !powerModal.classList.contains('hidden') && window.location.hash !== '#power') {
                    closePowerModal();
                }
            }
        }

        function navigateWithTransition(url) {
            const overlay = document.getElementById('transition-overlay');
            overlay.classList.remove('opacity-0');
            overlay.classList.add('opacity-100');
            setTimeout(() => {
                window.location.href = url;
            }, 600);
        }

        window.addEventListener('load', () => {
            handleHash();
            loadMomaData();
        });
        window.addEventListener('hashchange', handleHash);
    </script>
</body>

</html>